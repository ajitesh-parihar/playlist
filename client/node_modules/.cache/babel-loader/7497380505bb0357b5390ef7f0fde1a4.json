{"ast":null,"code":"import _regeneratorRuntime from\"/home/mnz/Desktop/Work/js/playlist/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mnz/Desktop/Work/js/playlist/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mnz/Desktop/Work/js/playlist/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Button,Col,Container,Row}from\"react-bootstrap\";import{useNavigate,useSearchParams}from\"react-router-dom\";import{getCover,searchGames}from\"../Controllers/igdb\";import{CardBox}from\"./Components/CardBox\";import{Footer}from\"./Components/Footer\";import{GameCard}from\"./Components/GameCard\";import{Header}from\"./Components/Header\";import{genres}from\"../Helpers/enumerators\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var SearchPage=function SearchPage(){var navigate=useNavigate();var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var searchName=searchParams.get(\"q\");var genre=searchParams.get(\"genre\");var _useState=useState(),_useState2=_slicedToArray(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchInput=_useState4[0],setSearchInput=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),gameList=_useState6[0],setGameList=_useState6[1];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(searchQuery){_context.next=2;break;}return _context.abrupt(\"return\");case 2:setGameList([]);_context.next=5;return searchGames(searchQuery);case 5:response=_context.sent;console.log(response);setGameList(response);// response.forEach((item) => {\n//   getCover(item.id).then((data) => {\n//     setGameList((old) => [\n//       ...old,\n//       {\n//         id: item.id,\n//         name: item.name,\n//         summary: item.summary,\n//         cover: `${coverUrl}${data}`,\n//       },\n//     ]);\n//   });\n// });\ncase 8:case\"end\":return _context.stop();}}},_callee);}))();},[searchQuery]);useEffect(function(){setGameList([]);setSearchInput(\"\".concat(searchName?searchName:\"\"));setSearchQuery({searchName:searchName,genre:genre});},[genre,searchName]);return/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column min-vh-100 w-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Container,{className:\"mb-5\",children:[/*#__PURE__*/_jsxs(Row,{className:\"w-100\",children:[/*#__PURE__*/_jsx(Col,{className:\"col-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"active-cyan-4 mb-4\",children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",placeholder:\"Search for a game...\",\"aria-label\":\"Search\",onChange:function onChange(e){setSearchInput(e.target.value);},value:searchInput,onKeyUp:function onKeyUp(e){if(e.key===\"Enter\"){if(searchInput===searchQuery.searchName)return;if(searchInput.length===0)return;navigate(\"/search?q=\".concat(searchInput,\"&\").concat(searchQuery.genre&&\"genre=\".concat(searchQuery.genre)));}}})})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){if(searchInput===searchQuery.searchName)return;if(searchInput.length===0)return;navigate(\"/search?q=\".concat(searchInput,\"&\").concat(searchQuery.genre&&\"genre=\".concat(searchQuery.genre)));},children:\"Search\"})})]}),/*#__PURE__*/_jsx(Row,{children:(searchQuery===null||searchQuery===void 0?void 0:searchQuery.genre)&&/*#__PURE__*/_jsx(\"h3\",{children:\"\".concat(genres.find(function(item){return item.id==searchQuery.genre;}).name,\" games:\")})}),/*#__PURE__*/_jsx(Row,{className:\"align-items-center d-flex\",children:/*#__PURE__*/_jsx(CardBox,{gameList:gameList})})]}),/*#__PURE__*/_jsx(Footer,{})]});};","map":{"version":3,"names":["useEffect","useState","Button","Col","Container","Row","useNavigate","useSearchParams","getCover","searchGames","CardBox","Footer","GameCard","Header","genres","SearchPage","navigate","searchParams","searchName","get","genre","searchQuery","setSearchQuery","searchInput","setSearchInput","gameList","setGameList","response","console","log","e","target","value","key","length","find","item","id","name"],"sources":["/home/mnz/Desktop/Work/js/playlist/client/src/Views/SearchPage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\nimport { getCover, searchGames } from \"../Controllers/igdb\";\nimport { CardBox } from \"./Components/CardBox\";\nimport { Footer } from \"./Components/Footer\";\nimport { GameCard } from \"./Components/GameCard\";\nimport { Header } from \"./Components/Header\";\nimport { genres } from \"../Helpers/enumerators\";\n\nexport const SearchPage = () => {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const searchName = searchParams.get(\"q\");\n  const genre = searchParams.get(\"genre\");\n  const [searchQuery, setSearchQuery] = useState();\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [gameList, setGameList] = useState([]);\n\n  useEffect(() => {\n    (async () => {\n      if (!searchQuery) return;\n      setGameList([]);\n      const response = await searchGames(searchQuery);\n      console.log(response);\n      setGameList(response);\n      // response.forEach((item) => {\n      //   getCover(item.id).then((data) => {\n      //     setGameList((old) => [\n      //       ...old,\n      //       {\n      //         id: item.id,\n      //         name: item.name,\n      //         summary: item.summary,\n      //         cover: `${coverUrl}${data}`,\n      //       },\n      //     ]);\n      //   });\n      // });\n    })();\n  }, [searchQuery]);\n\n  useEffect(() => {\n    setGameList([]);\n    setSearchInput(`${searchName ? searchName : \"\"}`);\n    setSearchQuery({\n      searchName,\n      genre,\n    });\n  }, [genre, searchName]);\n\n  return (\n    <div className=\"d-flex flex-column min-vh-100 w-100\">\n      <Header />\n      <Container className=\"mb-5\">\n        <Row className=\"w-100\">\n          <Col className=\"col-10\">\n            <div className=\"active-cyan-4 mb-4\">\n              <input\n                className=\"form-control\"\n                type=\"text\"\n                placeholder=\"Search for a game...\"\n                aria-label=\"Search\"\n                onChange={(e) => {\n                  setSearchInput(e.target.value);\n                }}\n                value={searchInput}\n                onKeyUp={(e) => {\n                  if (e.key === \"Enter\") {\n                    if (searchInput === searchQuery.searchName) return;\n                    if (searchInput.length === 0) return;\n                    navigate(\n                      `/search?q=${searchInput}&${\n                        searchQuery.genre && `genre=${searchQuery.genre}`\n                      }`\n                    );\n                  }\n                }}\n              />\n            </div>\n          </Col>\n          <Col>\n            <Button\n              onClick={() => {\n                if (searchInput === searchQuery.searchName) return;\n                if (searchInput.length === 0) return;\n                navigate(\n                  `/search?q=${searchInput}&${\n                    searchQuery.genre && `genre=${searchQuery.genre}`\n                  }`\n                );\n              }}\n            >\n              Search\n            </Button>\n          </Col>\n        </Row>\n        <Row>\n          {searchQuery?.genre && (\n            <h3>{`${\n              genres.find((item) => item.id == searchQuery.genre).name\n            } games:`}</h3>\n          )}\n        </Row>\n        <Row className=\"align-items-center d-flex\">\n          <CardBox gameList={gameList} />\n        </Row>\n      </Container>\n      <Footer />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}